.row
  .column(ng-if="!vm.loggedIn")
    .ui.info.message
      .header Login required
      p Please login to be able to access query bookmarks
      p
        button.ui.primary.button(login) Login to PML-TQ
  .column(ng-if="vm.loggedIn")
    .ui.basic.segment
      button.ui.labeled.icon.button(type="button" ng-click="vm.addList()")
        i.plus.icon
        | Add new list
    .ui.info.message(ng-if="vm.files && vm.files.length == 0")
      .header No lists
      p Query bookmarks are organized to separated lists. It's similar
        | to TrEd where you organize your queries to files.
      p You don't have any lists of queries yet. Start by clicking:
        = ' '
        button.ui.mini.button(type="button" ng-click="vm.addList()") Add new list

    span(ng-repeat="file in vm.files | orderBy:'name' track by file.id")
      .ui.top.menu.attached
        .ui.item.button(ui-popup type="button" title="Collapse query list" ng-click="notcollapsed = ! notcollapsed" ng-class="{disabled: file.queryIds.length==0}")
          i.chevron.down.icon(ng-if="!notcollapsed")
          i.chevron.up.icon(ng-if="notcollapsed")
        //-        .ui.item {{file.queryIds.length}}
        .ui.item.header.filelist(ng-bind="file.name")
        .right.menu
          a.ui.item(ng-click="vm.shareList(file)" title="{{file.isPublic ? 'Disable sharing' : 'Share query list'}}")
            i.share.alternate.icon(ng-class="{green: file.isPublic}")
          a.ui.item(ui-sref="treebank.queryfile.index({fileID: file.id})") 
            i.add.icon
            | Use list
          a.ui.item(type="button" ng-click="vm.renameList(file)")
            i.edit.icon
            | Rename
          a.ui.item(ng-click="vm.deleteList(file)")
            i.remove.icon
            | Delete
      .ui.bottom.segment.secondary.attached(ng-show="notcollapsed")
        .items.queryfile(ui-sortable="sortableOptions" ng-model="file.queries")
          .item(ng-repeat="query in file.queries")
            .ui.top.menu.attached
              .ui.item.button(ui-popup type="button" title="Collapse query" ng-click="notcollapsedquery = ! notcollapsedquery" )
                i.chevron.down.icon(ng-if="!notcollapsedquery")
                i.chevron.up.icon(ng-if="notcollapsedquery")
              .ui.item.button
                i.handle.move.icon
              
              .ui.item.header(ng-bind="query.name")
              .ui.item.query.preview {{query.query || '&lt;query is empty&gt;'}}
              .right.menu
                a.ui.item(ng-click="vm.shareQuery(file,query)" title="{{query.isPublic ? 'Disable sharing' : 'Share query'}}")
                  i.share.alternate.icon(ng-class="{green: query.isPublic}")
                a.ui.item(ui-sref="treebank.queryfile.index({fileID: file.id, queryID: query.id})") 
                  i.add.icon
                  | Use query
                a.ui.item(type="button" ng-click="vm.renameQuery(file, query)")
                  i.edit.icon
                  | Rename
                a.ui.item(type="button" ng-click="vm.deleteQuery(file, query)")
                  i.remove.icon   
                  | Delete
            .ui.bottom.segment.tertiary.attached(ng-show="notcollapsedquery")
              .ui.label(ng-repeat="tb in vm.getTreebanks(query)" ng-init="logo=vm.logo(tb)" logo-image="logo" image-width="75")
              .ui.form
                .ui.top.attached.tabular.menu
                  .ui.item.button(ng-class="{active: !!editor}" ng-click="editor=true")
                    | Editor
                  .ui.item.button(type="button" ng-class="{active: !editor}" ng-click="editor=false")
                    | Preview
                .ui.botton.attached.tab.segment(ng-class="{active: !!editor}")
                  .ui.field
                    textarea(ng-model="query.description")
                .ui.botton.attached.tab.segment(ng-class="{active: !editor}")
                  .markdownView(ng-model="query.description")
              button.ui.labeled.icon.button(type="button" ng-click="vm.saveQuery(file, query)")
                i.save.icon
                | Save query



